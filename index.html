<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>2DWORLD - Free 2D Worlds</title>
  <link rel="stylesheet" href="./styles.css">
  <style>
    .topbar{ position:relative; height:88px; padding:8px 10px; }
    .auth{ position:absolute; top:10px; left:12px; background:rgba(255,255,255,.85); border:1px solid rgba(0,0,0,.15); padding:2px 6px; border-radius:2px; font-weight:bold; }
    .logo{ display:inline-block; margin:8px auto 0; text-align:center; width:100%; font-family: Impact, Arial Black, sans-serif; letter-spacing:1px; }
    .logo-word{ font-size:48px; color:#fff; text-shadow:0 2px 0 rgba(0,0,0,.25); }
    .logo-world{ font-size:48px; color:#ff4a3a; text-shadow:0 2px 0 rgba(0,0,0,.25); }
    .signup-cta{ position:absolute; right:10px; top:16px; width:210px; height:40px; display:flex; align-items:center; justify-content:center;
      font-weight:bold; color:#0b2b66; border:1px solid rgba(0,0,0,.25); border-radius:4px;
      background:linear-gradient(#fff4b8, #ffb53a);
    }
    .columns{ display:flex; gap:10px; padding:10px; background:#f5f5f5; border:1px solid rgba(0,0,0,.35); border-top:none; box-shadow:0 10px 22px rgba(0,0,0,.25); }
    .col-left{ width:560px; } .col-right{ width:310px; }
    .row-top{ display:flex; gap:8px; align-items:stretch; }
    .login-box{ width:170px; }
    .promo-box{ width:380px; }
    .playnow-box{ width:170px; display:flex; flex-direction:column; align-items:center; justify-content:center; }
    .playnow{ width:130px; height:130px; border-radius:999px; display:flex; align-items:center; justify-content:center; text-align:center;
      font-weight:900; font-size:28px; line-height:.9; color:#fff; background: radial-gradient(circle at 30% 25%, #9bff80, #16a800 55%, #0a6b00);
      border:4px solid #0d5f00;
    }
    .promo-inner{ height:100%; display:flex; gap:10px; align-items:center; padding:10px; background:linear-gradient(#fdfdfd,#eeeeee); }
    .promo-icon{ width:90px; height:90px; border-radius:10px; border:1px solid #bbb; background:linear-gradient(#d9e9ff,#8db9ff); }
    .promo-title{ font-size:16px; font-weight:bold; }
    .footer{ margin-top:10px; padding:10px 8px 16px; background:#f5f5f5; border:1px solid rgba(0,0,0,.35); box-shadow:0 10px 22px rgba(0,0,0,.25); text-align:center; }
    .legal{ margin-top:10px; font-size:10px; color:#444; }
    .tiny-links{ margin-top:8px; text-align:center; font-size:10px; }
    .tiny-links a{ color:#fff; font-weight:bold; }
    .muted{ color:#d9d9d9; font-size:11px; }
  </style>
</head>
<body>
  <div id="viewport"><div id="page">
    <div class="top-sky">
      <div class="topbar">
        <div class="auth"><a href="./account.html" id="accountLink">Login</a></div>
        <a class="logo" href="./index.html"><span class="logo-word">2D</span><span class="logo-world">WORLD</span></a>
        <a class="signup-cta" href="./register.html">Sign-up and Play!</a>
      </div>
      <ul class="nav">
        <li><a class="active" href="./index.html">My 2DWORLD</a></li>
        <li><a href="#" onclick="return false;">Worlds</a></li>
        <li><a href="#" onclick="return false;">Catalog</a></li>
        <li><a href="#" onclick="return false;">People</a></li>
        <li><a href="#" onclick="return false;">Creator Club</a></li>
        <li><a href="#" onclick="return false;">Events</a></li>
        <li><a href="#" onclick="return false;">Forum</a></li>
        <li><a href="#" onclick="return false;">News</a></li>
        <li><a href="#" onclick="return false;">Parents</a></li>
        <li><a href="#" onclick="return false;">Help</a></li>
      </ul>
    </div>

    <div class="columns">
      <div class="col-left">
        <div class="row-top">
          <div class="login-box box">
            <div class="box-h dark">Member Login</div>
            <div class="box-b dark">
              <div id="loginMsg" class="muted" style="margin-bottom:6px;">Sign in with your email + password.</div>
              <label class="lbl" for="email">Email:</label>
              <input id="email" class="txt" type="email" autocomplete="email" />
              <label class="lbl" for="pass">Password:</label>
              <input id="pass" class="txt" type="password" autocomplete="current-password" />
              <button id="loginBtn" class="btn" style="width:100%; margin-top:8px;">Login</button>
              <a class="btn secondary" href="./register.html" style="width:100%; margin-top:6px; text-align:center;">Register</a>
              <div class="tiny-links">
                <a href="./reset.html">Forgot password?</a>
                <span style="opacity:.5"> | </span>
                <a href="#" id="resendVerify">Resend verification</a>
              </div>
            </div>
          </div>

          <div class="promo-box box">
            <div class="promo-inner">
              <div class="promo-icon"></div>
              <div>
                <div class="promo-title">Welcome to 2DWORLD</div>
                <div style="color:#444;">Build, battle, roleplay, or just hang out — all in 2D.</div>
                <div style="color:#777; font-size:11px; margin-top:6px;">(No Flash. Runs in modern browsers.)</div>
              </div>
            </div>
          </div>

          <div class="playnow-box box">
            <a class="playnow" href="./account.html"><span>Play<br/>Now</span></a>
            <div style="margin-top:6px; font-size:11px; color:#666;">[ report ]</div>
          </div>
        </div>

        <div class="box" style="margin-top:10px;">
          <div class="box-h">Featured World: <span style="color:#666;font-weight:bold;">(blank)</span></div>
          <div class="box-b">
            <div style="border:1px solid #aaa; background:linear-gradient(#f6f6f6,#e6e6e6); padding:18px;">
              <b>No featured world yet.</b><br>This section will be used once Worlds can be published.
            </div>
          </div>
        </div>
      </div>

      <div class="col-right">
        <div class="box">
          <div class="box-h">2DWORLD Status</div>
          <div class="box-b" style="color:#666; font-size:11px;">
            • Accounts: live (Firebase Auth)<br>
            • Worlds publishing: coming soon<br>
            • Stats: after launch
          </div>
        </div>
      </div>
    </div>

    <div class="footer">
      <div class="legal">
        2DWORLD © <span id="y"></span>. This site is not affiliated with Roblox Corporation.<br>
        Use of this site signifies your acceptance of the Terms and Conditions.
      </div>
    </div>

  </div></div>

  <script>document.getElementById("y").textContent = new Date().getFullYear();</script>

  <script type="module">
    import { loginWithEmail, watchAuth, prettyError, resendVerification } from "./auth.js";
    const loginMsg = document.getElementById("loginMsg");
    const loginBtn = document.getElementById("loginBtn");
    const resendBtn = document.getElementById("resendVerify");
    const accountLink = document.getElementById("accountLink");

    loginBtn.addEventListener("click", async () => {
      loginMsg.textContent = "Signing in...";
      try{
        const email = document.getElementById("email").value.trim();
        const pass = document.getElementById("pass").value;
        await loginWithEmail(email, pass);
        location.href = "./account.html";
      }catch(e){ loginMsg.textContent = prettyError(e); }
    });

    resendBtn.addEventListener("click", async (e) => {
      e.preventDefault();
      try{ await resendVerification(); loginMsg.textContent = "Verification email sent."; }
      catch(err){ loginMsg.textContent = prettyError(err); }
    });

    watchAuth((user) => { accountLink.textContent = user ? "Account" : "Login"; });
  </script>
</body>
</html>
